/**
 * Scrollable Columns - Version Robuste (Compatible GecosTheme)
 */

/* ==========================================================================
   1. CIBLAGE ET VERROUILLAGE (Page Tableau Uniquement)
   ========================================================================== */
/* Utilise :has() pour détecter la présence du tableau #board-container.
   Cela garantit que le code s'applique UNIQUEMENT sur la page Board,
   sans casser le Dashboard ou le Profil. */

html:has(#board-container),
body:has(#board-container) {
    height: 100vh !important;
    overflow: hidden !important; /* Coupe le scroll de la page entière */
    margin: 0 !important;
    padding: 0 !important;
}

/* ==========================================================================
   2. STRUCTURE FLEXIBLE
   ========================================================================== */
/* Force le conteneur principal à faire la hauteur de l'écran et organise le contenu */
body:has(#board-container) #main {
    height: 100vh !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    padding-bottom: 0 !important;
}

/* Le conteneur du tableau prend tout l'espace restant sous l'en-tête */
body:has(#board-container) #board-container {
    flex: 1 !important;
    height: auto !important;
    overflow-x: auto !important; /* Scroll horizontal activé */
    overflow-y: hidden !important;
    margin: 0 !important;
}

body:has(#board-container) table.board-table {
    height: 100% !important;
}

/* ==========================================================================
   3. LES COLONNES SCROLLABLES (Le cœur du correctif)
   ========================================================================== */
body:has(#board-container) .board-task-list {
    /* 1. On définit la hauteur max par rapport à l'écran.
       Ajustez "180px" si le bas des colonnes est coupé (hauteur de votre header Gecos) */
    height: calc(100vh - 180px) !important;
    
    /* 2. On active le scroll interne */
    overflow-y: auto !important;
    overflow-x: hidden !important;
    
    /* 3. CRUCIAL : On écrase la "min-height" imposée par le JS de Kanboard */
    min-height: 0 !important;
    max-height: calc(100vh - 180px) !important;
    
    /* Esthétique */
    padding-right: 5px !important;
    box-sizing: border-box !important;
    margin-bottom: 0 !important;
}

/* ==========================================================================
   4. AUTRES VUES (Liste Projets)
   ========================================================================== */
/* On s'assure de ne pas toucher au Dashboard (qui a l'ID #dashboard) */
body.project-view-list .table-list {
    display: block;
    height: calc(100vh - 120px);
    overflow-y: auto;
}

/* ==========================================================================
   5. STYLE DES SCROLLBARS
   ========================================================================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    background: #f1f1f1;
}
::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}